{
  "permissions": {
    "allow": [
      "WebFetch(domain:open.fda.gov)",
      "WebSearch",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(python -m pytest:*)",
      "Bash(pip install:*)",
      "Bash(python:*)",
      "Bash(playwright install:*)",
      "Bash(timeout:*)",
      "Bash(dir:*)",
      "Bash(ls:*)",
      "WebFetch(domain:www.ema.europa.eu)",
      "WebFetch(domain:atcddd.fhi.no)",
      "WebFetch(domain:www.pmda.go.jp)",
      "WebFetch(domain:github.com)",
      "WebFetch(domain:bioportal.bioontology.org)",
      "WebFetch(domain:m.yakup.com)",
      "WebFetch(domain:www.yakup.com)",
      "WebFetch(domain:www.medigatenews.com)",
      "WebFetch(domain:www.pharmnews.com)",
      "WebFetch(domain:www.fiercepharma.com)",
      "WebFetch(domain:endpts.com)",
      "WebFetch(domain:www.biopharmadive.com)",
      "WebFetch(domain:endpoints.news)",
      "WebFetch(domain:www.statnews.com)",
      "WebFetch(domain:www.reuters.com)",
      "Bash(start \"\" \"C:/Jimin/RegScan/data/scraping/dashboard.html\")",
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(start \"\" \"C:/Jimin/RegScan/data/scraping/dashboard_v2.html\")",
      "WebFetch(domain:www.data.go.kr)",
      "WebFetch(domain:nedrug.mfds.go.kr)",
      "WebFetch(domain:cris.nih.go.kr)",
      "WebFetch(domain:data.mfds.go.kr)",
      "WebFetch(domain:velog.io)",
      "Bash(quarto --version:*)",
      "Bash(powershell:*)",
      "Bash(\"C:\\\\Program Files\\\\Quarto\\\\bin\\\\quarto.exe\" --version)",
      "Bash(\"C:\\\\Program Files\\\\Quarto\\\\bin\\\\quarto.exe\" render regscan_server_proposal.qmd)",
      "Bash(start \"\" \"C:\\\\Jimin\\\\RegScan\\\\docs\\\\proposal\\\\regscan_server_proposal.html\")",
      "Bash(start \"\" \"C:\\\\Jimin\\\\RegScan\\\\docs\\\\proposal\\\\dashboard_mockup.html\")",
      "Bash(where:*)",
      "Bash(where chrome)",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless --screenshot=\"C:\\\\Jimin\\\\RegScan\\\\docs\\\\proposal\\\\dashboard_screenshot.png\" --window-size=1400,900 --default-background-color=0 \"file:///C:/Jimin/RegScan/docs/proposal/dashboard_mockup.html\")",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --screenshot=dashboard_screenshot.png --window-size=1400,900 \"file:///C:/Jimin/RegScan/docs/proposal/dashboard_mockup.html\")",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --screenshot=\"C:\\\\Users\\\\sokch\\\\Downloads\\\\dashboard_screenshot.png\" --window-size=1400,900 \"file:///C:/Jimin/RegScan/docs/proposal/dashboard_mockup.html\")",
      "Bash(copy \"C:\\\\Users\\\\sokch\\\\Downloads\\\\dashboard_screenshot.png\" \"C:\\\\Jimin\\\\RegScan\\\\docs\\\\proposal\\\\dashboard_screenshot.png\")",
      "Bash(start \"\" regscan_server_proposal.html)",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --screenshot=\"C:\\\\Users\\\\sokch\\\\Downloads\\\\ppt_check.png\" --window-size=1600,900 \"file:///C:/Jimin/RegScan/docs/proposal/regscan_server_proposal.html\")",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --screenshot=\"C:\\\\Users\\\\sokch\\\\Downloads\\\\ppt_slide2.png\" --window-size=1600,900 \"file:///C:/Jimin/RegScan/docs/proposal/regscan_server_proposal.html#/1.-프로젝트-개요\")",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --screenshot=\"C:\\\\Users\\\\sokch\\\\Downloads\\\\ppt_slide2.png\" --window-size=1600,900 \"file:///C:/Jimin/RegScan/docs/proposal/regscan_server_proposal.html#/1\")",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --screenshot=\"C:\\\\Users\\\\sokch\\\\Downloads\\\\ppt_v2_slide1.png\" --window-size=1600,900 \"file:///C:/Jimin/RegScan/docs/proposal/regscan_server_proposal.html#/1\")",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --screenshot=\"C:\\\\Users\\\\sokch\\\\Downloads\\\\ppt_v2_slide2.png\" --window-size=1600,900 \"file:///C:/Jimin/RegScan/docs/proposal/regscan_server_proposal.html#/2\")",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --screenshot=\"C:\\\\Users\\\\sokch\\\\Downloads\\\\ppt_v2_slide3.png\" --window-size=1600,900 \"file:///C:/Jimin/RegScan/docs/proposal/regscan_server_proposal.html#/3\")",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --screenshot=\"C:\\\\Users\\\\sokch\\\\Downloads\\\\ppt_v2_slide4.png\" --window-size=1600,900 \"file:///C:/Jimin/RegScan/docs/proposal/regscan_server_proposal.html#/4\")",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --screenshot=\"C:\\\\Users\\\\sokch\\\\Downloads\\\\ppt_slide5.png\" --window-size=1600,900 \"file:///C:/Jimin/RegScan/docs/proposal/regscan_server_proposal.html#/5\")",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --screenshot=\"C:\\\\Users\\\\sokch\\\\Downloads\\\\report_mockup.png\" --window-size=1200,1600 \"file:///C:/Jimin/RegScan/docs/proposal/report_mockup.html\")",
      "Bash(start \"\" \"C:\\\\Jimin\\\\RegScan\\\\docs\\\\proposal\\\\report_mockup.html\")",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --screenshot=\"C:\\\\Users\\\\sokch\\\\Downloads\\\\report_screenshot.png\" --window-size=1400,900 \"file:///C:/Jimin/RegScan/docs/proposal/report_mockup.html\")",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --screenshot=\"C:\\\\Users\\\\sokch\\\\Downloads\\\\report_full.png\" --window-size=1200,3000 \"file:///C:/Jimin/RegScan/docs/proposal/report_mockup.html\")",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --screenshot=\"C:\\\\Users\\\\sokch\\\\Downloads\\\\ppt_slide5_new.png\" --window-size=1600,900 \"file:///C:/Jimin/RegScan/docs/proposal/regscan_server_proposal.html#/5\")",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --print-to-pdf=\"C:\\\\Jimin\\\\RegScan\\\\docs\\\\proposal\\\\regscan_server_proposal.pdf\" --no-pdf-header-footer \"file:///C:/Jimin/RegScan/docs/proposal/regscan_server_proposal.html?print-pdf\")",
      "Bash(\"C:\\\\Program Files\\\\Quarto\\\\bin\\\\quarto.exe\" render regscan_server_proposal.qmd --to pdf)",
      "Bash(\"C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\chrome.exe\" --headless=new --print-to-pdf=\"C:\\\\Jimin\\\\RegScan\\\\docs\\\\proposal\\\\regscan_server_proposal.pdf\" --print-to-pdf-no-header --no-margins \"file:///C:/Jimin/RegScan/docs/proposal/regscan_server_proposal.html\")",
      "Bash(iconv:*)",
      "Bash(chcp:*)",
      "WebFetch(domain:www.hira.or.kr)",
      "Bash(curl:*)",
      "Bash(pip show:*)",
      "Bash(du:*)",
      "Bash(git reset:*)",
      "Bash(git push:*)",
      "Bash(.venv/Scripts/python:*)",
      "Bash(.venv/Scripts/pip install:*)",
      "Bash(start:*)",
      "Bash(head:*)",
      "Bash(test:*)",
      "Bash(.venv\\\\Scripts\\\\pip:*)",
      "Bash(.venv\\\\Scripts\\\\pip.exe install:*)",
      "Bash(.venv/Scripts/pip.exe install:*)",
      "Bash(\"C:/Jimin/RegScan/.venv/Scripts/python.exe\" -m pip install apscheduler)",
      "Bash(\"C:/Jimin/RegScan/.venv/Scripts/python.exe\" -m ensurepip)",
      "Bash(\"C:/Jimin/RegScan/.venv/Scripts/python.exe\" -c \"from regscan.scheduler import start_scheduler, stop_scheduler, get_scheduler_status, run_daily_pipeline; print\\(''scheduler imports OK''\\)\")",
      "Bash(\"C:/Jimin/RegScan/.venv/Scripts/python.exe\" -c \"from regscan.api.routes.scheduler import router; print\\(''scheduler routes import OK''\\)\")",
      "Bash(\"C:/Jimin/RegScan/.venv/Scripts/python.exe\" -m pip install fastapi uvicorn)",
      "Bash(\"C:/Jimin/RegScan/.venv/Scripts/python.exe\":*)",
      "Bash(\"C:/Jimin/RegScan/.venv/Scripts/python.exe\" -c \"from regscan.api.main import app; routes = [r.path for r in app.routes]; print\\([r for r in routes if ''scheduler'' in r]\\)\")",
      "Bash(\"C:/Jimin/RegScan/.venv/Scripts/python.exe\" -c:*)",
      "Bash(\"C:/Jimin/RegScan/.venv/Scripts/python.exe\" -c \"\nimport asyncio\n\nasync def test\\(\\):\n    from regscan.scheduler import start_scheduler, stop_scheduler, get_scheduler_status\n    \n    start_scheduler\\(\\)\n    status = get_scheduler_status\\(\\)\n    print\\(f''Scheduler running={status[\"\"running\"\"]}, schedule={status[\"\"schedule\"\"]}''\\)\n    print\\(f''Next run: {status[\"\"next_run\"\"]}''\\)\n    stop_scheduler\\(\\)\n    status2 = get_scheduler_status\\(\\)\n    print\\(f''After stop: running={status2[\"\"running\"\"]}''\\)\n    print\\(''All OK!''\\)\n\nasyncio.run\\(test\\(\\)\\)\n\")",
      "Bash(\"C:/Jimin/RegScan/.venv/Scripts/python.exe\" -m pip install pandas)",
      "Bash(xargs:*)",
      "Bash(grep:*)",
      "Bash(\"C:/Jimin/RegScan/.venv/Scripts/python.exe\" -m uvicorn regscan.api.main:app --host 127.0.0.1 --port 8000)",
      "Bash(\"C:/Jimin/RegScan/.venv/Scripts/python.exe\" -m uvicorn:*)",
      "Bash(find:*)",
      "Bash(if not exist \"C:\\\\Jimin\\\\RegScan\\\\docs\\\\research\\\\llm\" mkdir \"C:\\\\Jimin\\\\RegScan\\\\docs\\\\research\\\\llm\")",
      "Bash(C:JiminRegScan.venvScriptspip.exe install jinja2)",
      "Bash(/c/Jimin/RegScan/.venv/Scripts/pip3.exe install:*)",
      "Bash(.venv/Scripts/python.exe:*)",
      "Bash(netstat:*)",
      "Bash(.venv/Scripts/uvicorn.exe:*)",
      "Bash(.venv/Scripts/pip3.exe install:*)",
      "Bash(tasklist:*)",
      "Bash(findstr:*)",
      "Bash(taskkill:*)",
      "Bash(.venv\\\\Scripts\\\\python.exe:*)",
      "Bash(C:JiminRegScan.venvScriptspython.exe -c \"from regscan.api.deps import DataStore, get_data_store; print\\(''deps OK''\\)\")",
      "Bash(wmic:*)",
      "Bash(done)",
      "Bash(ping:*)",
      "Bash(C:/Jimin/RegScan/.venv/Scripts/python.exe -m uvicorn:*)",
      "Bash(C:/Jimin/RegScan/.venv/Scripts/python.exe:*)",
      "Bash(git -C C:/Jimin/RegScan status --short)",
      "Bash(git -C C:/Jimin/RegScan diff --stat HEAD -- regscan/ pyproject.toml)",
      "Bash(git -C C:/Jimin/RegScan diff HEAD -- regscan/report/prompts.py --stat)",
      "Bash(git -C C:/Jimin/RegScan status --short output/briefings/)",
      "Bash(sqlite3:*)",
      "Bash(cmd /c:*)",
      "WebFetch(domain:clinicaltrials.gov)",
      "WebFetch(domain:biomcp.org)",
      "WebFetch(domain:www.nlm.nih.gov)",
      "WebFetch(domain:pytrials.readthedocs.io)",
      "WebFetch(domain:blog.stackademic.com)",
      "WebFetch(domain:zitniklab.hms.harvard.edu)",
      "Bash(\"C:\\\\Jimin\\\\RegScan\\\\_temp_analyze.py\" << 'PYEOF'\nimport sqlite3, json\nfrom collections import Counter\nfrom datetime import datetime, timedelta\n\ndb = sqlite3.connect\\(r\"C:\\\\Jimin\\\\RegScan\\\\data\\\\regscan.db\"\\)\ndb.row_factory = sqlite3.Row\ncur = db.cursor\\(\\)\n\n# 1. Total counts\nprint\\(\"=== DB 현황 ===\"\\)\nfor table in [\"drugs\", \"regulatory_events\", \"stream_snapshots\", \"stream_briefings\"]:\n    try:\n        cur.execute\\(f\"SELECT COUNT\\(*\\) FROM {table}\"\\)\n        print\\(f\"  {table}: {cur.fetchone\\(\\)[0]}건\"\\)\n    except:\n        print\\(f\"  {table}: 없음\"\\)\n\n# 2. Regulatory events date distribution\nprint\\(\"\\\\n=== regulatory_events 날짜 분포 ===\"\\)\ncur.execute\\(\"SELECT event_date, event_type, source FROM regulatory_events WHERE event_date IS NOT NULL ORDER BY event_date DESC LIMIT 200\"\\)\nrows = cur.fetchall\\(\\)\ndate_counts = Counter\\(\\)\ntype_counts = Counter\\(\\)\nsource_counts = Counter\\(\\)\nrecent_events = []\nfor r in rows:\n    d = r[\"event_date\"][:10] if r[\"event_date\"] else \"unknown\"\n    date_counts[d] += 1\n    type_counts[r[\"event_type\"] or \"unknown\"] += 1\n    source_counts[r[\"source\"] or \"unknown\"] += 1\n    if len\\(recent_events\\) < 30:\n        recent_events.append\\({\"date\": d, \"type\": r[\"event_type\"], \"source\": r[\"source\"]}\\)\n\nprint\\(\"\\\\n날짜별 이벤트 수 \\(최근 30일\\):\"\\)\nfor d in sorted\\(date_counts.keys\\(\\), reverse=True\\)[:30]:\n    print\\(f\"  {d}: {date_counts[d]}건\"\\)\n\nprint\\(f\"\\\\n이벤트 유형별:\"\\)\nfor t, c in type_counts.most_common\\(20\\):\n    print\\(f\"  {t}: {c}건\"\\)\n\nprint\\(f\"\\\\n소스별:\"\\)\nfor s, c in source_counts.most_common\\(10\\):\n    print\\(f\"  {s}: {c}건\"\\)\n\n# 3. Drugs with scores\nprint\\(\"\\\\n=== 약물 점수 분포 ===\"\\)\ncur.execute\\(\"SELECT global_score, COUNT\\(*\\) as cnt FROM drugs GROUP BY global_score ORDER BY global_score DESC\"\\)\nfor r in cur.fetchall\\(\\):\n    print\\(f\"  score {r['global_score']}: {r['cnt']}건\"\\)\n\n# 4. Drugs by first_seen_at\nprint\\(\"\\\\n=== drugs.first_seen_at 분포 ===\"\\)\ncur.execute\\(\"SELECT first_seen_at FROM drugs WHERE first_seen_at IS NOT NULL\"\\)\nseen_dates = Counter\\(\\)\nfor r in cur.fetchall\\(\\):\n    d = r[\"first_seen_at\"][:10] if r[\"first_seen_at\"] else \"unknown\"\n    seen_dates[d] += 1\nfor d in sorted\\(seen_dates.keys\\(\\), reverse=True\\)[:15]:\n    print\\(f\"  {d}: {seen_dates[d]}건\"\\)\n\n# 5. Stream snapshots\nprint\\(\"\\\\n=== stream_snapshots ===\"\\)\ncur.execute\\(\"SELECT stream_name, sub_category, drug_count, signal_count, collected_at FROM stream_snapshots ORDER BY collected_at DESC\"\\)\nfor r in cur.fetchall\\(\\):\n    print\\(f\"  {r['stream_name']}/{r['sub_category']}: {r['drug_count']}약물, {r['signal_count']}시그널 \\({r['collected_at']}\\)\"\\)\n\n# 6. Check change_logs if exists\nprint\\(\"\\\\n=== change_logs ===\"\\)\ntry:\n    cur.execute\\(\"SELECT * FROM change_logs ORDER BY detected_at DESC LIMIT 20\"\\)\n    for r in cur.fetchall\\(\\):\n        print\\(f\"  {dict\\(r\\)}\"\\)\nexcept Exception as e:\n    print\\(f\"  테이블 없음 또는 에러: {e}\"\\)\n\n# 7. Sample recent events with drug names\nprint\\(\"\\\\n=== 최근 이벤트 상세 \\(drug_id → inn\\) ===\"\\)\ncur.execute\\(\"\"\"\n    SELECT re.event_date, re.event_type, re.source, re.description, d.inn, d.global_score\n    FROM regulatory_events re\n    JOIN drugs d ON re.drug_id = d.id\n    WHERE re.event_date IS NOT NULL\n    ORDER BY re.event_date DESC\n    LIMIT 30\n\"\"\"\\)\nfor r in cur.fetchall\\(\\):\n    print\\(f\"  {r['event_date'][:10]} | {r['inn'][:30]:30} | score={r['global_score']:3} | {r['event_type']:15} | {r['source']:8} | {\\(r['description'] or ''\\)[:60]}\"\\)\n\ndb.close\\(\\)\nPYEOF)",
      "Bash(\"C:\\\\Jimin\\\\RegScan\\\\_temp_analyze.py\" << 'PYEOF'\nimport sqlite3, json\nfrom collections import Counter\n\ndb = sqlite3.connect\\(r\"C:\\\\Jimin\\\\RegScan\\\\data\\\\regscan.db\"\\)\ndb.row_factory = sqlite3.Row\ncur = db.cursor\\(\\)\n\n# 1. Total counts\nprint\\(\"=== DB 현황 ===\"\\)\nfor table in [\"drugs\", \"regulatory_events\", \"stream_snapshots\", \"stream_briefings\",\n              \"feed_cards\", \"preprints\", \"clinical_trials\", \"clinical_trials_gov\",\n              \"hira_reimbursements\", \"briefing_reports\", \"drug_change_log\",\n              \"pdufa_dates\", \"drug_competitors\", \"ai_insights\", \"articles\",\n              \"market_reports\", \"expert_opinions\", \"scan_snapshots\"]:\n    try:\n        cur.execute\\(f\"SELECT COUNT\\(*\\) FROM {table}\"\\)\n        print\\(f\"  {table}: {cur.fetchone\\(\\)[0]}건\"\\)\n    except Exception as e:\n        print\\(f\"  {table}: 에러 - {e}\"\\)\n\n# 2. Regulatory events date distribution \\(using actual columns: approval_date, agency, status\\)\nprint\\(\"\\\\n=== regulatory_events 날짜 분포 ===\"\\)\ncur.execute\\(\"SELECT approval_date, agency, status, brand_name FROM regulatory_events WHERE approval_date IS NOT NULL ORDER BY approval_date DESC LIMIT 200\"\\)\nrows = cur.fetchall\\(\\)\ndate_counts = Counter\\(\\)\nagency_counts = Counter\\(\\)\nstatus_counts = Counter\\(\\)\nfor r in rows:\n    d = str\\(r[\"approval_date\"]\\)[:10] if r[\"approval_date\"] else \"unknown\"\n    date_counts[d] += 1\n    agency_counts[r[\"agency\"] or \"unknown\"] += 1\n    status_counts[r[\"status\"] or \"unknown\"] += 1\n\nprint\\(\"\\\\n날짜별 이벤트 수 \\(최근\\):\"\\)\nfor d in sorted\\(date_counts.keys\\(\\), reverse=True\\)[:30]:\n    print\\(f\"  {d}: {date_counts[d]}건\"\\)\n\nprint\\(f\"\\\\nAgency별:\"\\)\nfor a, c in agency_counts.most_common\\(20\\):\n    print\\(f\"  {a}: {c}건\"\\)\n\nprint\\(f\"\\\\nStatus별:\"\\)\nfor s, c in status_counts.most_common\\(20\\):\n    print\\(f\"  {s}: {c}건\"\\)\n\n# 3. Drugs with scores\nprint\\(\"\\\\n=== 약물 점수 분포 ===\"\\)\ncur.execute\\(\"SELECT global_score, COUNT\\(*\\) as cnt FROM drugs GROUP BY global_score ORDER BY global_score DESC\"\\)\nfor r in cur.fetchall\\(\\):\n    print\\(f\"  score {r['global_score']}: {r['cnt']}건\"\\)\n\n# 4. Drugs by first_seen_at\nprint\\(\"\\\\n=== drugs.first_seen_at 분포 ===\"\\)\ncur.execute\\(\"SELECT first_seen_at FROM drugs WHERE first_seen_at IS NOT NULL\"\\)\nseen_dates = Counter\\(\\)\nfor r in cur.fetchall\\(\\):\n    d = str\\(r[\"first_seen_at\"]\\)[:10] if r[\"first_seen_at\"] else \"unknown\"\n    seen_dates[d] += 1\nfor d in sorted\\(seen_dates.keys\\(\\), reverse=True\\)[:15]:\n    print\\(f\"  {d}: {seen_dates[d]}건\"\\)\n\n# 5. Stream snapshots\nprint\\(\"\\\\n=== stream_snapshots ===\"\\)\ncur.execute\\(\"SELECT stream_name, sub_category, drug_count, signal_count, collected_at FROM stream_snapshots ORDER BY collected_at DESC\"\\)\nfor r in cur.fetchall\\(\\):\n    print\\(f\"  {r['stream_name']}/{r['sub_category']}: {r['drug_count']}약물, {r['signal_count']}시그널 \\({r['collected_at']}\\)\"\\)\n\n# 6. Check drug_change_log\nprint\\(\"\\\\n=== drug_change_log ===\"\\)\ntry:\n    cur.execute\\(\"SELECT * FROM drug_change_log ORDER BY detected_at DESC LIMIT 20\"\\)\n    rows = cur.fetchall\\(\\)\n    if rows:\n        for r in rows:\n            print\\(f\"  {dict\\(r\\)}\"\\)\n    else:\n        print\\(\"  \\(비어 있음\\)\"\\)\nexcept Exception as e:\n    print\\(f\"  테이블 없음 또는 에러: {e}\"\\)\n\n# 7. Sample recent regulatory events with drug names\nprint\\(\"\\\\n=== 최근 regulatory_events 상세 \\(drug_id -> inn\\) ===\"\\)\ncur.execute\\(\"\"\"\n    SELECT re.approval_date, re.agency, re.status, re.brand_name, \n           re.is_orphan, re.is_breakthrough, re.is_accelerated, re.is_priority,\n           d.inn, d.global_score\n    FROM regulatory_events re\n    JOIN drugs d ON re.drug_id = d.id\n    WHERE re.approval_date IS NOT NULL\n    ORDER BY re.approval_date DESC\n    LIMIT 30\n\"\"\"\\)\nfor r in cur.fetchall\\(\\):\n    flags = []\n    if r[\"is_orphan\"]: flags.append\\(\"orphan\"\\)\n    if r[\"is_breakthrough\"]: flags.append\\(\"BT\"\\)\n    if r[\"is_accelerated\"]: flags.append\\(\"accel\"\\)\n    if r[\"is_priority\"]: flags.append\\(\"priority\"\\)\n    flag_str = \",\".join\\(flags\\) if flags else \"-\"\n    print\\(f\"  {str\\(r['approval_date']\\)[:10]} | {\\(r['inn'] or ''\\)[:30]:30} | score={r['global_score'] or 0:3} | {\\(r['agency'] or ''\\):5} | {\\(r['status'] or ''\\):15} | {\\(r['brand_name'] or ''\\)[:25]:25} | {flag_str}\"\\)\n\n# 8. Feed cards summary\nprint\\(\"\\\\n=== feed_cards 요약 ===\"\\)\ncur.execute\\(\"SELECT source_type, COUNT\\(*\\) as cnt FROM feed_cards GROUP BY source_type\"\\)\nfor r in cur.fetchall\\(\\):\n    print\\(f\"  {r['source_type']}: {r['cnt']}건\"\\)\n\ncur.execute\\(\"SELECT published_at, title, source_type, impact_level FROM feed_cards ORDER BY published_at DESC LIMIT 15\"\\)\nprint\\(\"\\\\n최근 feed_cards:\"\\)\nfor r in cur.fetchall\\(\\):\n    print\\(f\"  {\\(str\\(r['published_at']\\) or ''\\)[:10]} | {\\(r['source_type'] or ''\\):12} | {\\(r['impact_level'] or ''\\):6} | {\\(r['title'] or ''\\)[:60]}\"\\)\n\n# 9. PDUFA dates\nprint\\(\"\\\\n=== pdufa_dates ===\"\\)\ncur.execute\\(\"SELECT inn, pdufa_date, company, indication, status FROM pdufa_dates ORDER BY pdufa_date DESC LIMIT 15\"\\)\nfor r in cur.fetchall\\(\\):\n    print\\(f\"  {str\\(r['pdufa_date']\\)[:10]} | {\\(r['inn'] or ''\\)[:25]:25} | {\\(r['company'] or ''\\)[:20]:20} | {\\(r['status'] or ''\\):10} | {\\(r['indication'] or ''\\)[:40]}\"\\)\n\n# 10. clinical_trials_gov summary\nprint\\(\"\\\\n=== clinical_trials_gov 요약 ===\"\\)\ncur.execute\\(\"SELECT verdict, COUNT\\(*\\) as cnt FROM clinical_trials_gov GROUP BY verdict\"\\)\nfor r in cur.fetchall\\(\\):\n    print\\(f\"  verdict={r['verdict']}: {r['cnt']}건\"\\)\ncur.execute\\(\"SELECT phase, COUNT\\(*\\) as cnt FROM clinical_trials_gov GROUP BY phase ORDER BY phase\"\\)\nfor r in cur.fetchall\\(\\):\n    print\\(f\"  phase={r['phase']}: {r['cnt']}건\"\\)\n\ndb.close\\(\\)\nPYEOF)",
      "Bash(del \"C:\\\\Jimin\\\\RegScan\\\\_temp_analyze.py\")",
      "Bash(set PYTHONUTF8=1:*)",
      "Bash(git status:*)",
      "Bash(TaskStop:*)"
    ]
  }
}
