# LLM 큐레이션

- 보험심사/수가 관점 중요이슈에 관한 입법/행정예고 + 보도자료를 분석해서 “이슈 해설 노트”(마크다운)를 생성

## 전체 흐름

1. **LLM 1차 필터링**
    - 각 문서별로 보험심사 관련도 등급(A/B/C/D) 부여
2. **A/B 등급만 선별 → 큐레이션 후보**
3. **입법/행정예고 ↔ 보도자료 매칭 (스코어 기반)**
4. **매칭된 묶음 단위로 LLM에 전달 → “이슈 해설 노트”(마크다운) 생성**

## LLM 1차 필터링 로직

- **행사·홍보성 문서/보험과 거리가 먼 문서**는 제거하고 **보험심사·수가와 직접/간접 관련된 문서만 남기기**

### 등급 정의

- `A_직접영향`
    - 수가, 급여/비급여, 요양급여 기준, 청구방법, 본인부담, 약가, 장기요양급여 등 **심사·청구 로직 자체가 변하는 내용**
- `B_간접영향`
    - 장기요양기관 평가, 재활의료기관, 신의료기술, 보험료율·재정, 부당청구·명단공표 등 **보험·수가 환경에 강하게 영향을 주는 제도 변화**
- `C_관련낮음`
    - 보건·복지 일반 정책이지만 심사/수가와의 연결이 약함
- `D_무관`
    - 행사, 캠페인, 수기 공모 등 순수 홍보성

## 입법/행정예고 ↔ 보도자료 매칭

- 입법/행정예고 **1건 기준**으로 관련성이 높은 보도자료를 **점수 기반으로 상위 N개 매칭**

### 매칭 스코어 요소

1. **법/고시명(law_name) 일치/유사도**
    - 제목에서 `「…」`, `~법 시행령`, `~고시` 추출 후
    - 보도자료 제목·본문에 포함 여부 및 유사도
2. **핵심어(core term) 일치/유사도**
    - 예: `노인장기요양보험법 시행령` → `노인장기요양보험`
3. **topic_type 유사도**
    - 입법예고와 보도자료의 topic_type이 겹치면 가산점
4. **중요 키워드 겹침**
    - `요양급여`, `수가`, `비급여`, `장기요양`, `보험료율`, `부당청구` 등
5. **변화 키워드**
    - 보도자료에 `개정`, `제정`, `시행`, `도입`, `조정`, `인상`, `강화` 등 포함 시 가산점
6. **날짜 근접도**
    - `period` 시작일 vs `publication_date` 일정 기간(예: ±90일) 안에 있을수록 점수↑

→ 합산 스코어 기준으로 **상위 `top_k`(기본 3개) + 최소 점수(`min_score`) 이상만 채택**

## 이슈 해설 노트(마크다운) 생성

### 입력

- 입법/행정예고 1건 + 매칭된 보도자료 0~N건

### LLM 출력 구조

```jsx
1. `## 🧾 이슈 제목`
2. `### 1. 한 줄 요약`
3. `### 2. 무엇이 어떻게 바뀌나 (Before → After)`
    - **반드시 표 포함**
    
    ```markdown
    | 항목 | 개정 전 | 개정 후 |
    | --- | --- | --- |
    | ... | ... | ... |
    
    ```
    
4. `### 3. 개정 배경`
5. `### 4. 영향을 받는 대상`
6. `### 5. 보험심사·청구 관점 체크포인트`
7. `### 6. 예상 Q&A` (0~3개)
8. `### 7. 관련 문서`
    - 입법예고 + 보도자료 제목과 URL 정리
```